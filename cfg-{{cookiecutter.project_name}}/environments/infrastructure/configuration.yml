---
##########################
# versions

ceph_version: {{cookiecutter.ceph_version}}

##########################
# helper

configure_cephclient: yes
configure_openstackclient: yes
configure_phpmyadmin: yes
configure_rally: yes
configure_sshconfig: yes

##########################
# cephclient

{% raw -%}
cephclient_keyring: "{{ lookup('file', '{{ configuration_directory }}/environments/infrastructure/files/ceph/ceph.client.admin.keyring') }}"
cephclient_keyring_name: client.admin
cephclient_mons:
  - FIXME
cephclient_cluster_fsid: "{{ ceph_cluster_fsid }}"
cephclient_groupname: manager
{%- endraw %}

##########################
# openstackclient

{% raw -%}
openstackclient_directory: "{{ configuration_directory }}/environments/openstack"
openstackclient_configuration_directory: "{{ configuration_directory }}/environments/openstack"
{%- endraw %}

##########################
# rally

{% raw -%}
rally_nginx_host: "{{ hostvars[inventory_hostname]['ansible_' + management_interface]['ipv4']['address'] }}"
{%- endraw %}

##########################
# phpmyadmin

{% raw -%}
phpmyadmin_host: "{{ hostvars[inventory_hostname]['ansible_' + management_interface]['ipv4']['address'] }}"
phpmyadmin_database_host: "{{ kolla_internal_vip_address }}"
{%- endraw %}

##########################
# mirror

configure_aptly: no

##########################
# aptly

{% raw -%}
aptly_nginx_host: "{{ hostvars[inventory_hostname]['ansible_' + management_interface]['ipv4']['address'] }}"

aptly_repository_keys:
  - https://download.docker.com/linux/ubuntu/gpg
  - https://download.ceph.com/keys/release.asc

aptly_repositories:
  - name: ceph
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "https://download.ceph.com/debian-{{ ceph_version }} {{ ansible_distribution_release }} main"
  - name: docker
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable"
  - name: openstack
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "http://ubuntu-cloud.archive.canonical.com/ubuntu {{ ansible_distribution_release }}-updates/{{ openstack_version }} main"
  - name: "{{ ansible_distribution_release }}"
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "http://de.archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }} main restricted universe multiverse"
  - name: "{{ ansible_distribution_release }}-backports"
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "http://de.archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }}-backports main restricted universe multiverse"
  - name: "{{ ansible_distribution_release }}-security"
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "http://de.archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }}-security main restricted universe multiverse"
  - name: "{{ ansible_distribution_release }}-updates"
    architecture: amd64
    distribution: "{{ ansible_distribution_release }}"
    repository: "http://de.archive.ubuntu.com/ubuntu/ {{ ansible_distribution_release }}-updates main restricted universe multiverse"
{%- endraw %}
